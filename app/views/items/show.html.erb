<div class="page-wrapper min-h-screen py-12">
  <div class="max-w-md mx-auto bg-white rounded-lg shadow p-6">

    <h1 class="text-xl font-bold text-gray-800 mb-6 text-center">
      <%= @item.name %> 詳細
    </h1>

    <div class="flex justify-center mb-4">
  <div class="w-48 h-48 flex items-center justify-center rounded-md bg-gray-100">
    <% if @item.image.attached? %>
      <%= image_tag @item.image, class: "max-w-full max-h-full object-contain" %>
    <% else %>
      <span class="text-gray-400 text-sm">画像なし</span>
    <% end %>
  </div>
</div>

    <ul class="space-y-2 text-gray-700 text-sm">
      <li><strong>ブランド：</strong><%= @item.brand.presence || 'なし' %></li>
      <li><strong>カテゴリ：</strong><%= @item.category.presence || 'なし' %></li>
      <li><strong>カラー：</strong><%= @item.color.presence || 'なし' %></li>

      <% keywords = [@item.keyword1, @item.keyword2].map { |k| k.to_s.strip.downcase }.reject(&:blank?).uniq %>
      <% if keywords.any? %>
        <li><strong>キーワード：</strong><%= keywords.join(' / ') %></li>
      <% end %>

      <li><strong>値段：</strong><%= number_to_currency(@item.price, unit: "¥", precision: 0) %></li>
      <li><strong>説明：</strong><%= @item.description.presence || 'なし' %></li>
    </ul>

    <% if user_signed_in? && current_user == @item.user %>
  <div class="mt-6 flex justify-center gap-4">
    <!-- 編集ボタン -->
    <%= link_to '編集する', edit_item_path(@item), class: 'bg-blue-500 hover:bg-blue-600 text-white text-sm py-2 px-4 rounded' %>

    <!-- お気に入りボタン -->
    <% if current_user.favorite_items.exists?(@item.id) %>
      <%= button_to 'お気に入り解除 💔', item_favorite_path(@item), method: :delete,
          class: 'bg-yellow-400 hover:bg-yellow-500 text-white text-sm py-2 px-4 rounded' %>
    <% else %>
      <%= button_to 'お気に入り登録 💖', item_favorites_path(@item), method: :post,
          class: 'bg-pink-500 hover:bg-pink-600 text-white text-sm py-2 px-4 rounded' %>
    <% end %>

    <!-- 削除ボタン -->
    <%= button_to '削除する', item_path(@item),
      method: :delete,
      form: { data: { turbo_confirm: "本当に削除しますか？" } },
      class: 'bg-red-500 hover:bg-red-600 text-white text-sm py-2 px-4 rounded' %>
  </div>
<% end %>

  <% if params[:from] == "share" %>
  <div class="mt-6 text-center">
    <%= link_to "← シェアクローゼットへ戻る", share_closet_path, class: "text-blue-600 underline text-sm" %>
  </div>
<% end %>

  </div>
</div>
